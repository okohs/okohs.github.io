!function(s){function i(s,i){this.canvas=s,this.ds=i,this.fusens={}}function t(s,i,t,e,o){var n=this;this.id=t,this.ds=i,this.pos={x:0,y:0},this.canvas=s,"mobile"==fusen_util.getDevice()?this.canvas.append('<div id="'+this.id+'" class="p-husen theme-husen--'+o+'"><img src="http://www.paper-glasses.com/api/twipi/'+fusen_util.htmlEscape(e)+'"></div>'):this.canvas.append('<div id="'+this.id+'" class="p-husen theme-husen--'+o+'"><img src="http://www.paper-glasses.com/api/twipi/'+fusen_util.htmlEscape(e)+'" alt="profile image" width="55" height="55"><div class="p-husen__cross">×</div></div>');var p=$(".p-husen__cross","#"+this.id);if($("#"+this.id).draggable({start:function(){},drag:function(){n.pos.x=$("#"+n.id).position().left,n.pos.y=$("#"+n.id).position().top},stop:function(){n.ds.set(n.id,{x:n.pos.x,y:n.pos.y}),n.setPos(n.pos.x,n.pos.y)}}),p.click(function(s){n.ds.remove(n.id),s.stopPropagation()}),"mobile"==fusen_util.getDevice()){var h=720;$("#"+n.id).bind("touchstart",function(s){function i(){clearTimeout(timer)}timer=setTimeout(function(){confirm("このメッセージを削除しますか？")===!0&&n.ds.remove(n.id)},h),$("#"+n.id).bind("touchend touchmove touchcancel",i),s.stopPropagation()})}}i.prototype.getFusen=function(s){return this.fusens[s]},i.prototype.createFusen=function(s,i,e){var o=new t(this.canvas,this.ds,s,i,e);return this.fusens[s]=o,o},t.prototype.setPos=function(s,i){var t=0,e=127.6,o=this;o.pos.x=s+t,o.pos.y=i+e,$("#"+this.id).offset({top:o.pos.y,left:o.pos.x}),o.pos.y+$("#"+o.id).height()>o.canvas.height()&&o.canvas.css("height",o.pos.y+$("#"+o.id).outerHeight()+"px"),o.pos.x+$("#"+o.id).width()>o.canvas.width()&&(o.canvas.css("width",o.pos.x+$("#"+o.id).outerWidth()+"px"),$("#header").css("width",o.pos.x+$("#"+o.id).outerWidth()+"px"))},t.prototype.removeSelf=function(){var s=this;$("#"+s.id).remove()},s.FusenBuilder=i,s.Fusen=t}(window);